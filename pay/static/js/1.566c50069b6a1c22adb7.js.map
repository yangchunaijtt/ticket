{"version":3,"sources":["webpack:///src/components/pages/login.vue","webpack:///./src/components/pages/login.vue?b6a2","webpack:///./src/components/pages/login.vue"],"names":["login","name","components","mt-field","mint_ui_common","mt-button","mt-header","data","logincode","contactMobile","issended","tttime","loginbuttonenabel","loginbuttonstatus","fullPath","computed","loginphonestate","this","checkPhone","methods","v","test","showTime","count","_this","console","log","setTimeout","clicklogin","_this2","where","$cookie","get","p_axios","params","c","tel","contactName","val","wherefrom","then","res","message","set","userid","usersecret","mobile","error","user_id","catch","$router","push","clicklogincode","beforeRouteEnter","to","from","next","open","vm","close","pages_login","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","_v","placeholder","state","model","value","callback","$$v","expression","disabled","size","type","on","click","_s","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/1.566c50069b6a1c22adb7.js","sourcesContent":["<template>\r\n  <div class=\"loginpage\">\r\n    <mt-header title=\"登陆\"></mt-header>\r\n    <div class=\"logingcontent\">\r\n        <div class=\"user\">\r\n          <mt-field placeholder=\"请输入登陆手机号\" :state=\"loginphonestate\" v-model=\"contactMobile\">\r\n          </mt-field>\r\n        </div>\r\n        <div class=\"user\">\r\n          <mt-field placeholder=\"请输入验证码\" v-model=\"logincode\">\r\n            <mt-button @click=\"clicklogincode\" :disabled=\"issended\" size=\"small\" type=\"primary\">{{tttime==-1?'发送验证码':tttime}}</mt-button>\r\n          </mt-field>\r\n        </div>\r\n        <div class=\"subbutton\">\r\n          <mt-button size=\"large\" @click=\"clicklogin\" :disabled=\"loginbuttonenabel\" type=\"primary\">{{loginbuttonstatus==''?'登陆':loginbuttonstatus}}</mt-button>\r\n\r\n        </div>\r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Header, Field, Button, Indicator, Toast } from \"mint-ui\";\r\nimport axios from '@/assets/js/p_axios.js'\r\n\r\nexport default {\r\n  name: \"login\",\r\n  components: {\r\n    \"mt-field\": Field,\r\n    \"mt-button\": Button,\r\n    \"mt-header\": Header\r\n  },\r\n  data() {\r\n    return {\r\n      logincode: \"\",\r\n      contactMobile: \"\",\r\n      issended: false,\r\n      tttime: -1,\r\n      loginbuttonenabel: false,\r\n      loginbuttonstatus: \"\",\r\n      fullPath:\"/\"\r\n    };\r\n  },\r\n  computed:{\r\n    loginphonestate(){\r\n      if (this.contactMobile == \"\") {\r\n        return \"\";\r\n      } else {\r\n        if (this.checkPhone(this.contactMobile)) {\r\n          this.loginbuttonenabel = false;\r\n          this.issended = false;\r\n\r\n          return \"success\";\r\n        } else {\r\n          this.loginbuttonenabel = true;\r\n          this.issended = true;\r\n          return \"error\";\r\n        }\r\n        // this.loginphonestate=\"error\"\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n     checkPhone(v) {\r\n      // var phone = document.getElementById('phone').value;\r\n      if (!/^1[34578]\\d{9}$/.test(v)) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    },\r\n    showTime(count) {\r\n      this.tttime = count + \"秒后重新发送\";\r\n      this.issended = true;\r\n\r\n      console.log(this.tttime);\r\n      if (count == 0) {\r\n        // do job\r\n        this.tttime = -1;\r\n        this.issended = false;\r\n      } else {\r\n        count -= 1;\r\n        setTimeout(() => {\r\n          this.showTime(count);\r\n        }, 1000);\r\n      }\r\n    },\r\n    clicklogin() {\r\n      this.loginbuttonenabel = true;\r\n      this.loginbuttonstatus = \"登陆中...\";\r\n      // if(this.logincode==\"123\"){\r\n      //   this.loginbuttonstatus = \"登陆成功\";\r\n      //   this.$cookie.set(\"gdmobileusername\",'15861147205');\r\n      //   setTimeout(() => {\r\n      //         this.loginpopup = false;\r\n      //       }, 1000);\r\n      // }else{\r\n      //   this.loginbuttonstatus = \"验证码不正确\";\r\n      //       setTimeout(() => {\r\n      //         this.loginbuttonstatus = \"登陆\";\r\n      //         this.loginbuttonenabel = false;\r\n      //       }, 2000);\r\n      // }\r\n      \r\n      let where=this.$cookie.get(\"WHERE\")\r\n      axios\r\n        .get(\r\n          \"http://m.czgdly.com/transportation/gdtrain/Beecloud/login/sendcode.asp\",\r\n          {\r\n            params: {\r\n              c: \"2\",\r\n              tel: this.contactMobile,\r\n              name: this.contactName,\r\n              val: this.logincode,\r\n              wherefrom:where\r\n            }\r\n          }\r\n        )\r\n        .then(res => {\r\n          console.log(\"登陆返回的信息\", res.data.message);\r\n          if (res.data.message == \"success\") {\r\n            this.loginbuttonstatus = \"登陆成功\";\r\n            //this.$store.commit(\"setcercet\", res.data.data.usersecret); //存入state中\r\n            // this.$store.commit(\"setuserId\", res.data.data.userid);\r\n            // this.$store.commit(\"setUserPhone\", this.contactMobile);\r\n            this.$cookie.set(\"gdmobileusername\", this.contactMobile, 7);\r\n\r\n            this.$cookie.set(\"USERIDGDLY\", res.data.data.userid, 7);\r\n            this.$cookie.set(\"gdmobileuserphone\", this.contactMobile, 7);\r\n            this.$cookie.set(\"usersecret\", res.data.data.usersecret, 7);\r\n            axios\r\n              .get(\"http://m.czgdly.com/transportation/getuserid.asp\", {\r\n                params: {\r\n                  mobile: this.contactMobile\r\n                }\r\n              })\r\n              .then(res => {\r\n                console.log(\"获取到的usid\", res.data.data);\r\n                if (res.data.error == 0) {\r\n                  this.$cookie.set(\"userid\", res.data.data.user_id, 7);\r\n                } else {\r\n                  this.$cookie.set(\"userid\", \"0\", 7);\r\n                }\r\n              })\r\n              .catch(res => {}); //需要去获得用户的来源；\r\n            setTimeout(() => {\r\n              //这里要跳转\r\n              console.log(\"要跳转的url\",this.fullPath);\r\n              this.$router.push(this.fullPath);\r\n            }, 500);\r\n          } else {\r\n            this.loginbuttonstatus = \"验证码不正确\";\r\n            setTimeout(() => {\r\n              this.loginbuttonstatus = \"登陆\";\r\n              this.loginbuttonenabel = false;\r\n            }, 2000);\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.log(\"出错啦\");\r\n          this.loginbuttonenabel = false;\r\n          this.loginbuttonstatus = \"登陆\";\r\n        });\r\n    },\r\n    clicklogincode() {\r\n      //发送验证码\r\n      this.showTime(60);\r\n      axios\r\n        .get(\r\n          \"http://m.czgdly.com/transportation/gdtrain/Beecloud/login/sendcode.asp\",\r\n          {\r\n            params: { tel: this.contactMobile, c: \"1\" }\r\n          }\r\n        )\r\n        .then(res => {\r\n          console.log(\"发送验证码返回的信息\", res);\r\n        })\r\n        .catch(error => {});\r\n    }\r\n  },\r\n  beforeRouteEnter: (to, from, next) => {\r\n    // ...\r\n    Indicator.open();\r\n    console.log(\"from\",from.fullPath);\r\n    console.log(\"to0000000000000000\",to);\r\n    next(vm=>{\r\n      vm.fullPath=from.fullPath;\r\n      Indicator.close();\r\n    });\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.loginpage {\r\n  height: 100%;\r\n  background-color: #fff;\r\n}\r\n.logingcontent {\r\n  position: relative;\r\n  top: 30%;\r\n  transform: translateY(-30%);\r\n  padding: 10px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/pages/login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"loginpage\"},[_c('mt-header',{attrs:{\"title\":\"登陆\"}}),_vm._v(\" \"),_c('div',{staticClass:\"logingcontent\"},[_c('div',{staticClass:\"user\"},[_c('mt-field',{attrs:{\"placeholder\":\"请输入登陆手机号\",\"state\":_vm.loginphonestate},model:{value:(_vm.contactMobile),callback:function ($$v) {_vm.contactMobile=$$v},expression:\"contactMobile\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"user\"},[_c('mt-field',{attrs:{\"placeholder\":\"请输入验证码\"},model:{value:(_vm.logincode),callback:function ($$v) {_vm.logincode=$$v},expression:\"logincode\"}},[_c('mt-button',{attrs:{\"disabled\":_vm.issended,\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.clicklogincode}},[_vm._v(_vm._s(_vm.tttime==-1?'发送验证码':_vm.tttime))])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"subbutton\"},[_c('mt-button',{attrs:{\"size\":\"large\",\"disabled\":_vm.loginbuttonenabel,\"type\":\"primary\"},on:{\"click\":_vm.clicklogin}},[_vm._v(_vm._s(_vm.loginbuttonstatus==''?'登陆':_vm.loginbuttonstatus))])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-673ad723\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/pages/login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-673ad723\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./login.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-673ad723\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/pages/login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}