webpackJsonp([1],{"8ep4":function(t,e){},"M+ZD":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("Au9i"),i=o("+k7n"),s={name:"login",components:{"mt-field":n.Field,"mt-button":n.Button,"mt-header":n.Header},data:function(){return{logincode:"",contactMobile:"",issended:!1,tttime:-1,loginbuttonenabel:!1,loginbuttonstatus:"",fullPath:"/"}},computed:{loginphonestate:function(){return""==this.contactMobile?"":this.checkPhone(this.contactMobile)?(this.loginbuttonenabel=!1,this.issended=!1,"success"):(this.loginbuttonenabel=!0,this.issended=!0,"error")}},methods:{checkPhone:function(t){return!!/^1[34578]\d{9}$/.test(t)},showTime:function(t){var e=this;this.tttime=t+"秒后重新发送",this.issended=!0,console.log(this.tttime),0==t?(this.tttime=-1,this.issended=!1):(t-=1,setTimeout(function(){e.showTime(t)},1e3))},clicklogin:function(){var t=this;this.loginbuttonenabel=!0,this.loginbuttonstatus="登陆中...";var e=this.$cookie.get("WHERE");i.a.get("http://m.czgdly.com/transportation/gdtrain/Beecloud/login/sendcode.asp",{params:{c:"2",tel:this.contactMobile,name:this.contactName,val:this.logincode,wherefrom:e}}).then(function(e){console.log("登陆返回的信息",e.data.message),"success"==e.data.message?(t.loginbuttonstatus="登陆成功",t.$cookie.set("gdmobileusername",t.contactMobile,7),t.$cookie.set("USERIDGDLY",e.data.data.userid,7),t.$cookie.set("gdmobileuserphone",t.contactMobile,7),t.$cookie.set("usersecret",e.data.data.usersecret,7),i.a.get("http://m.czgdly.com/transportation/getuserid.asp",{params:{mobile:t.contactMobile}}).then(function(e){console.log("获取到的usid",e.data.data),0==e.data.error?t.$cookie.set("userid",e.data.data.user_id,7):t.$cookie.set("userid","0",7)}).catch(function(t){}),setTimeout(function(){console.log("要跳转的url",t.fullPath),t.$router.push(t.fullPath)},500)):(t.loginbuttonstatus="验证码不正确",setTimeout(function(){t.loginbuttonstatus="登陆",t.loginbuttonenabel=!1},2e3))}).catch(function(e){console.log("出错啦"),t.loginbuttonenabel=!1,t.loginbuttonstatus="登陆"})},clicklogincode:function(){this.showTime(60),i.a.get("http://m.czgdly.com/transportation/gdtrain/Beecloud/login/sendcode.asp",{params:{tel:this.contactMobile,c:"1"}}).then(function(t){console.log("发送验证码返回的信息",t)}).catch(function(t){})}},beforeRouteEnter:function(t,e,o){n.Indicator.open(),console.log("from",e.fullPath),console.log("to0000000000000000",t),o(function(t){t.fullPath=e.fullPath,n.Indicator.close()})}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"loginpage"},[o("mt-header",{attrs:{title:"登陆"}}),t._v(" "),o("div",{staticClass:"logingcontent"},[o("div",{staticClass:"user"},[o("mt-field",{attrs:{placeholder:"请输入登陆手机号",state:t.loginphonestate},model:{value:t.contactMobile,callback:function(e){t.contactMobile=e},expression:"contactMobile"}})],1),t._v(" "),o("div",{staticClass:"user"},[o("mt-field",{attrs:{placeholder:"请输入验证码"},model:{value:t.logincode,callback:function(e){t.logincode=e},expression:"logincode"}},[o("mt-button",{attrs:{disabled:t.issended,size:"small",type:"primary"},on:{click:t.clicklogincode}},[t._v(t._s(-1==t.tttime?"发送验证码":t.tttime))])],1)],1),t._v(" "),o("div",{staticClass:"subbutton"},[o("mt-button",{attrs:{size:"large",disabled:t.loginbuttonenabel,type:"primary"},on:{click:t.clicklogin}},[t._v(t._s(""==t.loginbuttonstatus?"登陆":t.loginbuttonstatus))])],1)])],1)},staticRenderFns:[]};var c=o("VU/8")(s,a,!1,function(t){o("8ep4")},null,null);e.default=c.exports}});
//# sourceMappingURL=1.566c50069b6a1c22adb7.js.map